{"version":3,"sources":["pages/Fabricante/FabricantePermisos.tsx"],"names":["FabricantePermisos","observer","history","rootStore","useStores","apiToaster","useApiToaster","loginStore","NotificacionScreen","location","pathname","RUTAS_APP_FABRICANTE","CONFIGURACION_NOTIFICACIONES","useState","Activo","setActivo","React","useEffect","notificaciones_activas","sonidos_activos","pageStyles","accion_boton_derecho","goBack","boton_derecho","size","color","titulo_header","sub_titulo","mostrar_barra","className","checked","onChange","activo","success_msg","error_msg","setNotificacionesActivas","Capacitor","getPlatform","onesignal_id","onesignal_token","environment","api","setDevice","then","result","setSonidosActivos","activar_desactivar"],"mappings":"yRAWaA,EAAoDC,aAAS,YAAgB,IAAdC,EAAa,EAAbA,QACpEC,EAAYC,cACZC,EAAaC,cACZC,EAAcJ,EAAdI,WACDC,EAAqBN,EAAQO,SAASC,WAAaC,IAAqBC,6BAC9E,EAA4BC,oBAAS,GAArC,mBAAOC,EAAP,KAAeC,EAAf,KAEAC,IAAMC,WAAU,WAEZF,EADEP,EACQD,EAAWW,uBAEXX,EAAWY,mBAEtB,IA4BH,OAJAF,qBAAU,cAEP,IAEI,cAAC,IAAD,CACLG,WAAY,oBACZC,qBAAsB,kBAAMnB,EAAQoB,UACpCC,cAAe,cAAC,IAAD,CAASC,KAAM,GAAIC,MAAO,UACzCC,cAAexB,EAAQO,SAASC,WAAaC,IAAqBC,6BAA+B,iBAAmB,SACpHe,WAAU,IACVC,eAAe,EANV,SAQL,sBAAKC,UAAW,wBAAhB,UACE,mBAAGA,UAAW,YAAd,SAA2B,mCAASf,EAAS,aAAe,UAAjC,IAA6CZ,EAAQO,SAASC,WAAaC,IAAqBC,6BAA+B,iBAAmB,eAC7K,cAAC,IAAD,CACEY,KAAK,SACLC,MAAO,UACPK,QAAShB,EACTiB,SAAU,kBAxCW,SAACC,GAE1B,GADAjB,EAAUiB,GACNxB,EAAoB,CACtB,IAAMyB,EAAcD,EAAS,2BAA6B,8BACpDE,EAAYF,EAAS,6BAA+B,gCAC1DzB,EAAW4B,yBAAyBH,GACJ,QAA5BI,YAAUC,eACR9B,EAAW+B,cAAgB/B,EAAWgC,iBACxChC,EAAWiC,YAAYC,IAAIC,UACzBnC,EAAW+B,aACX/B,EAAWgC,gBACXP,GACAW,MAAK,SAAAC,GACLvC,EAAWuC,EAAOX,EAAaC,WAKrC3B,EAAWsC,kBAAkBb,GAsBXc,EAAoBhC,cAM7Bd","file":"static/js/32.aa0ad91b.chunk.js","sourcesContent":["import React, {useEffect, useState} from 'react';\nimport {observer} from \"mobx-react-lite\";\nimport {useStores} from \"../../models/root-store/root-store-context\";\nimport {RouteComponentProps} from \"react-router\";\nimport * as FIcon from \"react-feather\";\nimport {RUTAS_APP_FABRICANTE} from '../../constants';\nimport {Switch} from \"@material-ui/core\";\nimport {Capacitor} from \"@capacitor/core\";\nimport {useApiToaster} from \"../../helpers-ts\";\nimport {PageApp} from '../../components/PageApp';\n\nexport const FabricantePermisos: React.FC<RouteComponentProps> = observer(({history}) => {\n  const rootStore = useStores()\n  const apiToaster = useApiToaster()\n  const {loginStore} = rootStore\n  const NotificacionScreen = history.location.pathname === RUTAS_APP_FABRICANTE.CONFIGURACION_NOTIFICACIONES\n  const [Activo, setActivo] = useState(false)\n\n  React.useEffect(() => {\n    if (NotificacionScreen) {\n      setActivo(loginStore.notificaciones_activas)\n    } else {\n      setActivo(loginStore.sonidos_activos)\n    }\n  }, [])\n\n  const activar_desactivar = (activo: boolean) => {\n    setActivo(activo)\n    if (NotificacionScreen) {\n      const success_msg = activo ? 'Notificaciones activadas' : 'Notificaciones desactivadas'\n      const error_msg = activo ? 'activar las notificaciones' : 'desactivar las notificaciones'\n      loginStore.setNotificacionesActivas(activo)\n      if (Capacitor.getPlatform() !== 'web') {\n        if (loginStore.onesignal_id && loginStore.onesignal_token) {\n          loginStore.environment.api.setDevice(\n            loginStore.onesignal_id,\n            loginStore.onesignal_token,\n            activo\n          ).then(result => {\n            apiToaster(result,success_msg, error_msg)\n          })\n        }\n      }\n    } else {\n      loginStore.setSonidosActivos(activo)\n    }\n  }\n\n  useEffect(() => {\n\n  }, []);\n\n  return <PageApp\n    pageStyles={'background-blanco'}\n    accion_boton_derecho={() => history.goBack()}\n    boton_derecho={<FIcon.X size={30} color={'white'}/>}\n    titulo_header={history.location.pathname === RUTAS_APP_FABRICANTE.CONFIGURACION_NOTIFICACIONES ? 'Notificaciones' : 'Sonido'}\n    sub_titulo={` `}\n    mostrar_barra={false}\n  >\n    <div className={'mx-3 py-2 text-center'}>\n      <p className={'text-gray'}><strong>{Activo ? 'Desactivar' : 'Activar'} {history.location.pathname === RUTAS_APP_FABRICANTE.CONFIGURACION_NOTIFICACIONES ? 'Notificaciones' : 'Sonidos'}</strong></p>\n      <Switch\n        size=\"medium\"\n        color={'primary'}\n        checked={Activo}\n        onChange={() => activar_desactivar(!Activo)}\n      />\n    </div>\n  </PageApp>;\n});\n\nexport default FabricantePermisos;\n"],"sourceRoot":""}