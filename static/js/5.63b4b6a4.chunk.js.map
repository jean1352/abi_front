{"version":3,"sources":["../node_modules/uppy-plugin-image-compressor/node_modules/@uppy/utils/lib/Translator.js","../node_modules/uppy-plugin-image-compressor/node_modules/@uppy/utils/lib/hasProperty.js","../node_modules/compressorjs/dist/compressor.common.js","../node_modules/uppy-plugin-image-compressor/lib/index.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","has","require","module","exports","Translator","locales","_this","locale","strings","pluralize","n","Array","isArray","forEach","_apply","_proto","prevLocale","interpolate","phrase","options","_String$prototype","String","split","replace","dollarRegex","interpolated","arg","replacement","insertReplacement","RegExp","rx","newParts","chunk","push","raw","list","translate","translateArray","join","string","smart_count","plural","Error","object","_defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","_defineProperty","obj","value","ownKeys","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","_objectSpread2","getOwnPropertyDescriptors","defineProperties","canvasToBlob","fn","basedir","path","base","commonjsRequire","undefined","createCommonjsModule","window","CanvasPrototype","HTMLCanvasElement","hasBlobConstructor","Blob","Boolean","e","hasArrayBufferViewSupport","Uint8Array","size","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","MSBlobBuilder","dataURIPattern","dataURLtoBlob","atob","ArrayBuffer","dataURI","matches","mediaType","isBase64","dataString","byteString","arrayBuffer","intArray","bb","match","slice","decodeURIComponent","charCodeAt","type","append","getBlob","toBlob","mozGetAsFile","callback","quality","self","setTimeout","toDataURL","msToBlob","DEFAULTS","strict","checkOrientation","maxWidth","Infinity","maxHeight","minWidth","minHeight","width","height","mimeType","convertSize","beforeDraw","drew","success","error","WINDOW","document","REGEXP_IMAGE_TYPE","isImageType","test","fromCharCode","btoa","resetAndGetOrientation","orientation","dataView","DataView","littleEndian","app1Start","ifdStart","getUint8","byteLength","offset","tiffOffset","start","str","getStringFromCharCode","endianness","getUint16","firstIFDOffset","getUint32","_offset","_length","setUint16","REGEXP_DECIMALS","normalizeDecimalNumber","times","Math","round","ArrayBuffer$1","FileReader","URL","webkitURL","REGEXP_EXTENSION","AnotherCompressor","Compressor","file","instance","Constructor","TypeError","_classCallCheck","image","Image","aborted","result","init","protoProps","staticProps","toString","load","url","createObjectURL","reader","onload","_ref","data","chunks","uint8","subarray","from","concat","arrayBufferToDataURL","rotate","scaleX","scaleY","parseOrientation","onabort","fail","onerror","onloadend","readAsArrayBuffer","readAsDataURL","_this2","draw","naturalWidth","naturalHeight","navigator","userAgent","crossOrigin","alt","name","src","_ref2","_this3","_ref2$rotate","_ref2$scaleX","_ref2$scaleY","canvas","createElement","context","getContext","aspectRatio","is90DegreesRotated","abs","max","_ref3","_ref4","_ref5","destX","floor","min","destY","destWidth","destHeight","_ref6","fillStyle","fillRect","save","PI","scale","drawImage","restore","done","_ref7","revokeObjectURL","date","Date","lastModified","getTime","lastModifiedDate","extension","substr","imageTypeToExtension","err","abort","complete","_assertThisInitialized","ReferenceError","Plugin","UppyImageCompressor","_Plugin","subClass","superClass","uppy","opts","id","defaultLocale","compressingImages","i18nInit","prepareUpload","bind","compress","create","constructor","__proto__","setOptions","newOpts","translator","i18n","setPluginState","blob","Promise","resolve","reject","fileIDs","promises","map","fileID","getFile","emit","mode","message","then","compressedBlob","log","setFileState","all","install","addPreProcessor","uninstall","removePreProcessor"],"mappings":"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","file":"static/js/5.63b4b6a4.chunk.js","sourcesContent":["function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nvar has = require('./hasProperty');\n/**\n * Translates strings with interpolation & pluralization support.\n * Extensible with custom dictionaries and pluralization functions.\n *\n * Borrows heavily from and inspired by Polyglot https://github.com/airbnb/polyglot.js,\n * basically a stripped-down version of it. Differences: pluralization functions are not hardcoded\n * and can be easily added among with dictionaries, nested objects are used for pluralization\n * as opposed to `||||` delimeter\n *\n * Usage example: `translator.translate('files_chosen', {smart_count: 3})`\n */\n\n\nmodule.exports = /*#__PURE__*/function () {\n  /**\n   * @param {object|Array<object>} locales - locale or list of locales.\n   */\n  function Translator(locales) {\n    var _this = this;\n\n    this.locale = {\n      strings: {},\n      pluralize: function pluralize(n) {\n        if (n === 1) {\n          return 0;\n        }\n\n        return 1;\n      }\n    };\n\n    if (Array.isArray(locales)) {\n      locales.forEach(function (locale) {\n        return _this._apply(locale);\n      });\n    } else {\n      this._apply(locales);\n    }\n  }\n\n  var _proto = Translator.prototype;\n\n  _proto._apply = function _apply(locale) {\n    if (!locale || !locale.strings) {\n      return;\n    }\n\n    var prevLocale = this.locale;\n    this.locale = _extends({}, prevLocale, {\n      strings: _extends({}, prevLocale.strings, locale.strings)\n    });\n    this.locale.pluralize = locale.pluralize || prevLocale.pluralize;\n  }\n  /**\n   * Takes a string with placeholder variables like `%{smart_count} file selected`\n   * and replaces it with values from options `{smart_count: 5}`\n   *\n   * @license https://github.com/airbnb/polyglot.js/blob/master/LICENSE\n   * taken from https://github.com/airbnb/polyglot.js/blob/master/lib/polyglot.js#L299\n   *\n   * @param {string} phrase that needs interpolation, with placeholders\n   * @param {object} options with values that will be used to replace placeholders\n   * @returns {string} interpolated\n   */\n  ;\n\n  _proto.interpolate = function interpolate(phrase, options) {\n    var _String$prototype = String.prototype,\n        split = _String$prototype.split,\n        replace = _String$prototype.replace;\n    var dollarRegex = /\\$/g;\n    var dollarBillsYall = '$$$$';\n    var interpolated = [phrase];\n\n    for (var arg in options) {\n      if (arg !== '_' && has(options, arg)) {\n        // Ensure replacement value is escaped to prevent special $-prefixed\n        // regex replace tokens. the \"$$$$\" is needed because each \"$\" needs to\n        // be escaped with \"$\" itself, and we need two in the resulting output.\n        var replacement = options[arg];\n\n        if (typeof replacement === 'string') {\n          replacement = replace.call(options[arg], dollarRegex, dollarBillsYall);\n        } // We create a new `RegExp` each time instead of using a more-efficient\n        // string replace so that the same argument can be replaced multiple times\n        // in the same phrase.\n\n\n        interpolated = insertReplacement(interpolated, new RegExp('%\\\\{' + arg + '\\\\}', 'g'), replacement);\n      }\n    }\n\n    return interpolated;\n\n    function insertReplacement(source, rx, replacement) {\n      var newParts = [];\n      source.forEach(function (chunk) {\n        // When the source contains multiple placeholders for interpolation,\n        // we should ignore chunks that are not strings, because those\n        // can be JSX objects and will be otherwise incorrectly turned into strings.\n        // Without this condition we’d get this: [object Object] hello [object Object] my <button>\n        if (typeof chunk !== 'string') {\n          return newParts.push(chunk);\n        }\n\n        split.call(chunk, rx).forEach(function (raw, i, list) {\n          if (raw !== '') {\n            newParts.push(raw);\n          } // Interlace with the `replacement` value\n\n\n          if (i < list.length - 1) {\n            newParts.push(replacement);\n          }\n        });\n      });\n      return newParts;\n    }\n  }\n  /**\n   * Public translate method\n   *\n   * @param {string} key\n   * @param {object} options with values that will be used later to replace placeholders in string\n   * @returns {string} translated (and interpolated)\n   */\n  ;\n\n  _proto.translate = function translate(key, options) {\n    return this.translateArray(key, options).join('');\n  }\n  /**\n   * Get a translation and return the translated and interpolated parts as an array.\n   *\n   * @param {string} key\n   * @param {object} options with values that will be used to replace placeholders\n   * @returns {Array} The translated and interpolated parts, in order.\n   */\n  ;\n\n  _proto.translateArray = function translateArray(key, options) {\n    var string = this.locale.strings[key];\n    var hasPluralForms = typeof string === 'object';\n\n    if (hasPluralForms) {\n      if (options && typeof options.smart_count !== 'undefined') {\n        var plural = this.locale.pluralize(options.smart_count);\n        return this.interpolate(string[plural], options);\n      } else {\n        throw new Error('Attempted to use a string with plural forms, but no value was given for %{smart_count}');\n      }\n    }\n\n    return this.interpolate(string, options);\n  };\n\n  return Translator;\n}();","module.exports = function has(object, key) {\n  return Object.prototype.hasOwnProperty.call(object, key);\n};","/*!\n * Compressor.js v1.0.7\n * https://fengyuanchen.github.io/compressorjs\n *\n * Copyright 2018-present Chen Fengyuan\n * Released under the MIT license\n *\n * Date: 2020-11-28T07:13:17.754Z\n */\n\n'use strict';\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction createCommonjsModule(fn, basedir, module) {\n\treturn module = {\n\t\tpath: basedir,\n\t\texports: {},\n\t\trequire: function (path, base) {\n\t\t\treturn commonjsRequire(path, (base === undefined || base === null) ? module.path : base);\n\t\t}\n\t}, fn(module, module.exports), module.exports;\n}\n\nfunction commonjsRequire () {\n\tthrow new Error('Dynamic requires are not currently supported by @rollup/plugin-commonjs');\n}\n\nvar canvasToBlob = createCommonjsModule(function (module) {\n    if (typeof window === 'undefined') {\n      return;\n    }\n\n  (function (window) {\n\n    var CanvasPrototype = window.HTMLCanvasElement && window.HTMLCanvasElement.prototype;\n\n    var hasBlobConstructor = window.Blob && function () {\n      try {\n        return Boolean(new Blob());\n      } catch (e) {\n        return false;\n      }\n    }();\n\n    var hasArrayBufferViewSupport = hasBlobConstructor && window.Uint8Array && function () {\n      try {\n        return new Blob([new Uint8Array(100)]).size === 100;\n      } catch (e) {\n        return false;\n      }\n    }();\n\n    var BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder;\n    var dataURIPattern = /^data:((.*?)(;charset=.*?)?)(;base64)?,/;\n\n    var dataURLtoBlob = (hasBlobConstructor || BlobBuilder) && window.atob && window.ArrayBuffer && window.Uint8Array && function (dataURI) {\n      var matches, mediaType, isBase64, dataString, byteString, arrayBuffer, intArray, i, bb; // Parse the dataURI components as per RFC 2397\n\n      matches = dataURI.match(dataURIPattern);\n\n      if (!matches) {\n        throw new Error('invalid data URI');\n      } // Default to text/plain;charset=US-ASCII\n\n\n      mediaType = matches[2] ? matches[1] : 'text/plain' + (matches[3] || ';charset=US-ASCII');\n      isBase64 = !!matches[4];\n      dataString = dataURI.slice(matches[0].length);\n\n      if (isBase64) {\n        // Convert base64 to raw binary data held in a string:\n        byteString = atob(dataString);\n      } else {\n        // Convert base64/URLEncoded data component to raw binary:\n        byteString = decodeURIComponent(dataString);\n      } // Write the bytes of the string to an ArrayBuffer:\n\n\n      arrayBuffer = new ArrayBuffer(byteString.length);\n      intArray = new Uint8Array(arrayBuffer);\n\n      for (i = 0; i < byteString.length; i += 1) {\n        intArray[i] = byteString.charCodeAt(i);\n      } // Write the ArrayBuffer (or ArrayBufferView) to a blob:\n\n\n      if (hasBlobConstructor) {\n        return new Blob([hasArrayBufferViewSupport ? intArray : arrayBuffer], {\n          type: mediaType\n        });\n      }\n\n      bb = new BlobBuilder();\n      bb.append(arrayBuffer);\n      return bb.getBlob(mediaType);\n    };\n\n    if (window.HTMLCanvasElement && !CanvasPrototype.toBlob) {\n      if (CanvasPrototype.mozGetAsFile) {\n        CanvasPrototype.toBlob = function (callback, type, quality) {\n          var self = this;\n          setTimeout(function () {\n            if (quality && CanvasPrototype.toDataURL && dataURLtoBlob) {\n              callback(dataURLtoBlob(self.toDataURL(type, quality)));\n            } else {\n              callback(self.mozGetAsFile('blob', type));\n            }\n          });\n        };\n      } else if (CanvasPrototype.toDataURL && dataURLtoBlob) {\n        if (CanvasPrototype.msToBlob) {\n          CanvasPrototype.toBlob = function (callback, type, quality) {\n            var self = this;\n            setTimeout(function () {\n              if ((type && type !== 'image/png' || quality) && CanvasPrototype.toDataURL && dataURLtoBlob) {\n                callback(dataURLtoBlob(self.toDataURL(type, quality)));\n              } else {\n                callback(self.msToBlob(type));\n              }\n            });\n          };\n        } else {\n          CanvasPrototype.toBlob = function (callback, type, quality) {\n            var self = this;\n            setTimeout(function () {\n              callback(dataURLtoBlob(self.toDataURL(type, quality)));\n            });\n          };\n        }\n      }\n    }\n\n    if ( module.exports) {\n      module.exports = dataURLtoBlob;\n    } else {\n      window.dataURLtoBlob = dataURLtoBlob;\n    }\n  })(window);\n});\n\nvar isBlob = function isBlob(value) {\n  if (typeof Blob === 'undefined') {\n    return false;\n  }\n\n  return value instanceof Blob || Object.prototype.toString.call(value) === '[object Blob]';\n};\n\nvar DEFAULTS = {\n  /**\n   * Indicates if output the original image instead of the compressed one\n   * when the size of the compressed image is greater than the original one's\n   * @type {boolean}\n   */\n  strict: true,\n\n  /**\n   * Indicates if read the image's Exif Orientation information,\n   * and then rotate or flip the image automatically.\n   * @type {boolean}\n   */\n  checkOrientation: true,\n\n  /**\n   * The max width of the output image.\n   * @type {number}\n   */\n  maxWidth: Infinity,\n\n  /**\n   * The max height of the output image.\n   * @type {number}\n   */\n  maxHeight: Infinity,\n\n  /**\n   * The min width of the output image.\n   * @type {number}\n   */\n  minWidth: 0,\n\n  /**\n   * The min height of the output image.\n   * @type {number}\n   */\n  minHeight: 0,\n\n  /**\n   * The width of the output image.\n   * If not specified, the natural width of the source image will be used.\n   * @type {number}\n   */\n  width: undefined,\n\n  /**\n   * The height of the output image.\n   * If not specified, the natural height of the source image will be used.\n   * @type {number}\n   */\n  height: undefined,\n\n  /**\n   * The quality of the output image.\n   * It must be a number between `0` and `1`,\n   * and only available for `image/jpeg` and `image/webp` images.\n   * Check out {@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/toBlob canvas.toBlob}.\n   * @type {number}\n   */\n  quality: 0.8,\n\n  /**\n   * The mime type of the output image.\n   * By default, the original mime type of the source image file will be used.\n   * @type {string}\n   */\n  mimeType: 'auto',\n\n  /**\n   * PNG files over this value (5 MB by default) will be converted to JPEGs.\n   * To disable this, just set the value to `Infinity`.\n   * @type {number}\n   */\n  convertSize: 5000000,\n\n  /**\n   * The hook function to execute before draw the image into the canvas for compression.\n   * @type {Function}\n   * @param {CanvasRenderingContext2D} context - The 2d rendering context of the canvas.\n   * @param {HTMLCanvasElement} canvas - The canvas for compression.\n   * @example\n   * function (context, canvas) {\n   *   context.fillStyle = '#fff';\n   * }\n   */\n  beforeDraw: null,\n\n  /**\n   * The hook function to execute after drew the image into the canvas for compression.\n   * @type {Function}\n   * @param {CanvasRenderingContext2D} context - The 2d rendering context of the canvas.\n   * @param {HTMLCanvasElement} canvas - The canvas for compression.\n   * @example\n   * function (context, canvas) {\n   *   context.filter = 'grayscale(100%)';\n   * }\n   */\n  drew: null,\n\n  /**\n   * The hook function to execute when success to compress the image.\n   * @type {Function}\n   * @param {File} file - The compressed image File object.\n   * @example\n   * function (file) {\n   *   console.log(file);\n   * }\n   */\n  success: null,\n\n  /**\n   * The hook function to execute when fail to compress the image.\n   * @type {Function}\n   * @param {Error} err - An Error object.\n   * @example\n   * function (err) {\n   *   console.log(err.message);\n   * }\n   */\n  error: null\n};\n\nvar IS_BROWSER = typeof window !== 'undefined' && typeof window.document !== 'undefined';\nvar WINDOW = IS_BROWSER ? window : {};\n\nvar slice = Array.prototype.slice;\n/**\n * Convert array-like or iterable object to an array.\n * @param {*} value - The value to convert.\n * @returns {Array} Returns a new array.\n */\n\nfunction toArray(value) {\n  return Array.from ? Array.from(value) : slice.call(value);\n}\nvar REGEXP_IMAGE_TYPE = /^image\\/.+$/;\n/**\n * Check if the given value is a mime type of image.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given is a mime type of image, else `false`.\n */\n\nfunction isImageType(value) {\n  return REGEXP_IMAGE_TYPE.test(value);\n}\n/**\n * Convert image type to extension.\n * @param {string} value - The image type to convert.\n * @returns {boolean} Returns the image extension.\n */\n\nfunction imageTypeToExtension(value) {\n  var extension = isImageType(value) ? value.substr(6) : '';\n\n  if (extension === 'jpeg') {\n    extension = 'jpg';\n  }\n\n  return \".\".concat(extension);\n}\nvar fromCharCode = String.fromCharCode;\n/**\n * Get string from char code in data view.\n * @param {DataView} dataView - The data view for read.\n * @param {number} start - The start index.\n * @param {number} length - The read length.\n * @returns {string} The read result.\n */\n\nfunction getStringFromCharCode(dataView, start, length) {\n  var str = '';\n  var i;\n  length += start;\n\n  for (i = start; i < length; i += 1) {\n    str += fromCharCode(dataView.getUint8(i));\n  }\n\n  return str;\n}\nvar btoa = WINDOW.btoa;\n/**\n * Transform array buffer to Data URL.\n * @param {ArrayBuffer} arrayBuffer - The array buffer to transform.\n * @param {string} mimeType - The mime type of the Data URL.\n * @returns {string} The result Data URL.\n */\n\nfunction arrayBufferToDataURL(arrayBuffer, mimeType) {\n  var chunks = [];\n  var chunkSize = 8192;\n  var uint8 = new Uint8Array(arrayBuffer);\n\n  while (uint8.length > 0) {\n    // XXX: Babel's `toConsumableArray` helper will throw error in IE or Safari 9\n    // eslint-disable-next-line prefer-spread\n    chunks.push(fromCharCode.apply(null, toArray(uint8.subarray(0, chunkSize))));\n    uint8 = uint8.subarray(chunkSize);\n  }\n\n  return \"data:\".concat(mimeType, \";base64,\").concat(btoa(chunks.join('')));\n}\n/**\n * Get orientation value from given array buffer.\n * @param {ArrayBuffer} arrayBuffer - The array buffer to read.\n * @returns {number} The read orientation value.\n */\n\nfunction resetAndGetOrientation(arrayBuffer) {\n  var dataView = new DataView(arrayBuffer);\n  var orientation; // Ignores range error when the image does not have correct Exif information\n\n  try {\n    var littleEndian;\n    var app1Start;\n    var ifdStart; // Only handle JPEG image (start by 0xFFD8)\n\n    if (dataView.getUint8(0) === 0xFF && dataView.getUint8(1) === 0xD8) {\n      var length = dataView.byteLength;\n      var offset = 2;\n\n      while (offset + 1 < length) {\n        if (dataView.getUint8(offset) === 0xFF && dataView.getUint8(offset + 1) === 0xE1) {\n          app1Start = offset;\n          break;\n        }\n\n        offset += 1;\n      }\n    }\n\n    if (app1Start) {\n      var exifIDCode = app1Start + 4;\n      var tiffOffset = app1Start + 10;\n\n      if (getStringFromCharCode(dataView, exifIDCode, 4) === 'Exif') {\n        var endianness = dataView.getUint16(tiffOffset);\n        littleEndian = endianness === 0x4949;\n\n        if (littleEndian || endianness === 0x4D4D\n        /* bigEndian */\n        ) {\n            if (dataView.getUint16(tiffOffset + 2, littleEndian) === 0x002A) {\n              var firstIFDOffset = dataView.getUint32(tiffOffset + 4, littleEndian);\n\n              if (firstIFDOffset >= 0x00000008) {\n                ifdStart = tiffOffset + firstIFDOffset;\n              }\n            }\n          }\n      }\n    }\n\n    if (ifdStart) {\n      var _length = dataView.getUint16(ifdStart, littleEndian);\n\n      var _offset;\n\n      var i;\n\n      for (i = 0; i < _length; i += 1) {\n        _offset = ifdStart + i * 12 + 2;\n\n        if (dataView.getUint16(_offset, littleEndian) === 0x0112\n        /* Orientation */\n        ) {\n            // 8 is the offset of the current tag's value\n            _offset += 8; // Get the original orientation value\n\n            orientation = dataView.getUint16(_offset, littleEndian); // Override the orientation with its default value\n\n            dataView.setUint16(_offset, 1, littleEndian);\n            break;\n          }\n      }\n    }\n  } catch (e) {\n    orientation = 1;\n  }\n\n  return orientation;\n}\n/**\n * Parse Exif Orientation value.\n * @param {number} orientation - The orientation to parse.\n * @returns {Object} The parsed result.\n */\n\nfunction parseOrientation(orientation) {\n  var rotate = 0;\n  var scaleX = 1;\n  var scaleY = 1;\n\n  switch (orientation) {\n    // Flip horizontal\n    case 2:\n      scaleX = -1;\n      break;\n    // Rotate left 180°\n\n    case 3:\n      rotate = -180;\n      break;\n    // Flip vertical\n\n    case 4:\n      scaleY = -1;\n      break;\n    // Flip vertical and rotate right 90°\n\n    case 5:\n      rotate = 90;\n      scaleY = -1;\n      break;\n    // Rotate right 90°\n\n    case 6:\n      rotate = 90;\n      break;\n    // Flip horizontal and rotate right 90°\n\n    case 7:\n      rotate = 90;\n      scaleX = -1;\n      break;\n    // Rotate left 90°\n\n    case 8:\n      rotate = -90;\n      break;\n  }\n\n  return {\n    rotate: rotate,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n}\nvar REGEXP_DECIMALS = /\\.\\d*(?:0|9){12}\\d*$/;\n/**\n * Normalize decimal number.\n * Check out {@link https://0.30000000000000004.com/}\n * @param {number} value - The value to normalize.\n * @param {number} [times=100000000000] - The times for normalizing.\n * @returns {number} Returns the normalized number.\n */\n\nfunction normalizeDecimalNumber(value) {\n  var times = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 100000000000;\n  return REGEXP_DECIMALS.test(value) ? Math.round(value * times) / times : value;\n}\n\nvar ArrayBuffer$1 = WINDOW.ArrayBuffer,\n    FileReader = WINDOW.FileReader;\nvar URL = WINDOW.URL || WINDOW.webkitURL;\nvar REGEXP_EXTENSION = /\\.\\w+$/;\nvar AnotherCompressor = WINDOW.Compressor;\n/**\n * Creates a new image compressor.\n * @class\n */\n\nvar Compressor = /*#__PURE__*/function () {\n  /**\n   * The constructor of Compressor.\n   * @param {File|Blob} file - The target image file for compressing.\n   * @param {Object} [options] - The options for compressing.\n   */\n  function Compressor(file, options) {\n    _classCallCheck(this, Compressor);\n\n    this.file = file;\n    this.image = new Image();\n    this.options = _objectSpread2(_objectSpread2({}, DEFAULTS), options);\n    this.aborted = false;\n    this.result = null;\n    this.init();\n  }\n\n  _createClass(Compressor, [{\n    key: \"init\",\n    value: function init() {\n      var _this = this;\n\n      var file = this.file,\n          options = this.options;\n\n      if (!isBlob(file)) {\n        this.fail(new Error('The first argument must be a File or Blob object.'));\n        return;\n      }\n\n      var mimeType = file.type;\n\n      if (!isImageType(mimeType)) {\n        this.fail(new Error('The first argument must be an image File or Blob object.'));\n        return;\n      }\n\n      if (!URL || !FileReader) {\n        this.fail(new Error('The current browser does not support image compression.'));\n        return;\n      }\n\n      if (!ArrayBuffer$1) {\n        options.checkOrientation = false;\n      }\n\n      if (URL && !options.checkOrientation) {\n        this.load({\n          url: URL.createObjectURL(file)\n        });\n      } else {\n        var reader = new FileReader();\n        var checkOrientation = options.checkOrientation && mimeType === 'image/jpeg';\n        this.reader = reader;\n\n        reader.onload = function (_ref) {\n          var target = _ref.target;\n          var result = target.result;\n          var data = {};\n\n          if (checkOrientation) {\n            // Reset the orientation value to its default value 1\n            // as some iOS browsers will render image with its orientation\n            var orientation = resetAndGetOrientation(result);\n\n            if (orientation > 1 || !URL) {\n              // Generate a new URL which has the default orientation value\n              data.url = arrayBufferToDataURL(result, mimeType);\n\n              if (orientation > 1) {\n                _extends(data, parseOrientation(orientation));\n              }\n            } else {\n              data.url = URL.createObjectURL(file);\n            }\n          } else {\n            data.url = result;\n          }\n\n          _this.load(data);\n        };\n\n        reader.onabort = function () {\n          _this.fail(new Error('Aborted to read the image with FileReader.'));\n        };\n\n        reader.onerror = function () {\n          _this.fail(new Error('Failed to read the image with FileReader.'));\n        };\n\n        reader.onloadend = function () {\n          _this.reader = null;\n        };\n\n        if (checkOrientation) {\n          reader.readAsArrayBuffer(file);\n        } else {\n          reader.readAsDataURL(file);\n        }\n      }\n    }\n  }, {\n    key: \"load\",\n    value: function load(data) {\n      var _this2 = this;\n\n      var file = this.file,\n          image = this.image;\n\n      image.onload = function () {\n        _this2.draw(_objectSpread2(_objectSpread2({}, data), {}, {\n          naturalWidth: image.naturalWidth,\n          naturalHeight: image.naturalHeight\n        }));\n      };\n\n      image.onabort = function () {\n        _this2.fail(new Error('Aborted to load the image.'));\n      };\n\n      image.onerror = function () {\n        _this2.fail(new Error('Failed to load the image.'));\n      }; // Match all browsers that use WebKit as the layout engine in iOS devices,\n      // such as Safari for iOS, Chrome for iOS, and in-app browsers.\n\n\n      if (WINDOW.navigator && /(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(WINDOW.navigator.userAgent)) {\n        // Fix the `The operation is insecure` error (#57)\n        image.crossOrigin = 'anonymous';\n      }\n\n      image.alt = file.name;\n      image.src = data.url;\n    }\n  }, {\n    key: \"draw\",\n    value: function draw(_ref2) {\n      var _this3 = this;\n\n      var naturalWidth = _ref2.naturalWidth,\n          naturalHeight = _ref2.naturalHeight,\n          _ref2$rotate = _ref2.rotate,\n          rotate = _ref2$rotate === void 0 ? 0 : _ref2$rotate,\n          _ref2$scaleX = _ref2.scaleX,\n          scaleX = _ref2$scaleX === void 0 ? 1 : _ref2$scaleX,\n          _ref2$scaleY = _ref2.scaleY,\n          scaleY = _ref2$scaleY === void 0 ? 1 : _ref2$scaleY;\n      var file = this.file,\n          image = this.image,\n          options = this.options;\n      var canvas = document.createElement('canvas');\n      var context = canvas.getContext('2d');\n      var aspectRatio = naturalWidth / naturalHeight;\n      var is90DegreesRotated = Math.abs(rotate) % 180 === 90;\n      var maxWidth = Math.max(options.maxWidth, 0) || Infinity;\n      var maxHeight = Math.max(options.maxHeight, 0) || Infinity;\n      var minWidth = Math.max(options.minWidth, 0) || 0;\n      var minHeight = Math.max(options.minHeight, 0) || 0;\n      var width = Math.max(options.width, 0) || naturalWidth;\n      var height = Math.max(options.height, 0) || naturalHeight;\n\n      if (is90DegreesRotated) {\n        var _ref3 = [maxHeight, maxWidth];\n        maxWidth = _ref3[0];\n        maxHeight = _ref3[1];\n        var _ref4 = [minHeight, minWidth];\n        minWidth = _ref4[0];\n        minHeight = _ref4[1];\n        var _ref5 = [height, width];\n        width = _ref5[0];\n        height = _ref5[1];\n      }\n\n      if (maxWidth < Infinity && maxHeight < Infinity) {\n        if (maxHeight * aspectRatio > maxWidth) {\n          maxHeight = maxWidth / aspectRatio;\n        } else {\n          maxWidth = maxHeight * aspectRatio;\n        }\n      } else if (maxWidth < Infinity) {\n        maxHeight = maxWidth / aspectRatio;\n      } else if (maxHeight < Infinity) {\n        maxWidth = maxHeight * aspectRatio;\n      }\n\n      if (minWidth > 0 && minHeight > 0) {\n        if (minHeight * aspectRatio > minWidth) {\n          minHeight = minWidth / aspectRatio;\n        } else {\n          minWidth = minHeight * aspectRatio;\n        }\n      } else if (minWidth > 0) {\n        minHeight = minWidth / aspectRatio;\n      } else if (minHeight > 0) {\n        minWidth = minHeight * aspectRatio;\n      }\n\n      if (height * aspectRatio > width) {\n        height = width / aspectRatio;\n      } else {\n        width = height * aspectRatio;\n      }\n\n      width = Math.floor(normalizeDecimalNumber(Math.min(Math.max(width, minWidth), maxWidth)));\n      height = Math.floor(normalizeDecimalNumber(Math.min(Math.max(height, minHeight), maxHeight)));\n      var destX = -width / 2;\n      var destY = -height / 2;\n      var destWidth = width;\n      var destHeight = height;\n\n      if (is90DegreesRotated) {\n        var _ref6 = [height, width];\n        width = _ref6[0];\n        height = _ref6[1];\n      }\n\n      canvas.width = width;\n      canvas.height = height;\n\n      if (!isImageType(options.mimeType)) {\n        options.mimeType = file.type;\n      }\n\n      var fillStyle = 'transparent'; // Converts PNG files over the `convertSize` to JPEGs.\n\n      if (file.size > options.convertSize && options.mimeType === 'image/png') {\n        fillStyle = '#fff';\n        options.mimeType = 'image/jpeg';\n      } // Override the default fill color (#000, black)\n\n\n      context.fillStyle = fillStyle;\n      context.fillRect(0, 0, width, height);\n\n      if (options.beforeDraw) {\n        options.beforeDraw.call(this, context, canvas);\n      }\n\n      if (this.aborted) {\n        return;\n      }\n\n      context.save();\n      context.translate(width / 2, height / 2);\n      context.rotate(rotate * Math.PI / 180);\n      context.scale(scaleX, scaleY);\n      context.drawImage(image, destX, destY, destWidth, destHeight);\n      context.restore();\n\n      if (options.drew) {\n        options.drew.call(this, context, canvas);\n      }\n\n      if (this.aborted) {\n        return;\n      }\n\n      var done = function done(result) {\n        if (!_this3.aborted) {\n          _this3.done({\n            naturalWidth: naturalWidth,\n            naturalHeight: naturalHeight,\n            result: result\n          });\n        }\n      };\n\n      if (canvas.toBlob) {\n        canvas.toBlob(done, options.mimeType, options.quality);\n      } else {\n        done(canvasToBlob(canvas.toDataURL(options.mimeType, options.quality)));\n      }\n    }\n  }, {\n    key: \"done\",\n    value: function done(_ref7) {\n      var naturalWidth = _ref7.naturalWidth,\n          naturalHeight = _ref7.naturalHeight,\n          result = _ref7.result;\n      var file = this.file,\n          image = this.image,\n          options = this.options;\n\n      if (URL && !options.checkOrientation) {\n        URL.revokeObjectURL(image.src);\n      }\n\n      if (result) {\n        // Returns original file if the result is greater than it and without size related options\n        if (options.strict && result.size > file.size && options.mimeType === file.type && !(options.width > naturalWidth || options.height > naturalHeight || options.minWidth > naturalWidth || options.minHeight > naturalHeight)) {\n          result = file;\n        } else {\n          var date = new Date();\n          result.lastModified = date.getTime();\n          result.lastModifiedDate = date;\n          result.name = file.name; // Convert the extension to match its type\n\n          if (result.name && result.type !== file.type) {\n            result.name = result.name.replace(REGEXP_EXTENSION, imageTypeToExtension(result.type));\n          }\n        }\n      } else {\n        // Returns original file if the result is null in some cases.\n        result = file;\n      }\n\n      this.result = result;\n\n      if (options.success) {\n        options.success.call(this, result);\n      }\n    }\n  }, {\n    key: \"fail\",\n    value: function fail(err) {\n      var options = this.options;\n\n      if (options.error) {\n        options.error.call(this, err);\n      } else {\n        throw err;\n      }\n    }\n  }, {\n    key: \"abort\",\n    value: function abort() {\n      if (!this.aborted) {\n        this.aborted = true;\n\n        if (this.reader) {\n          this.reader.abort();\n        } else if (!this.image.complete) {\n          this.image.onload = null;\n          this.image.onabort();\n        } else {\n          this.fail(new Error('The compression process has been aborted.'));\n        }\n      }\n    }\n    /**\n     * Get the no conflict compressor class.\n     * @returns {Compressor} The compressor class.\n     */\n\n  }], [{\n    key: \"noConflict\",\n    value: function noConflict() {\n      window.Compressor = AnotherCompressor;\n      return Compressor;\n    }\n    /**\n     * Change the default options.\n     * @param {Object} options - The new default options.\n     */\n\n  }, {\n    key: \"setDefaults\",\n    value: function setDefaults(options) {\n      _extends(DEFAULTS, options);\n    }\n  }]);\n\n  return Compressor;\n}();\n\nmodule.exports = Compressor;\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nvar _require = require('@uppy/core'),\n    Plugin = _require.Plugin;\n\nvar Translator = require('@uppy/utils/lib/Translator');\n\nvar Compressor = require('compressorjs/dist/compressor.common.js');\n\nvar UppyImageCompressor =\n/*#__PURE__*/\nfunction (_Plugin) {\n  _inheritsLoose(UppyImageCompressor, _Plugin);\n\n  function UppyImageCompressor(uppy, opts) {\n    var _this;\n\n    _this = _Plugin.call(this, uppy, opts) || this;\n    _this.id = _this.opts.id || 'ImageCompressor';\n    _this.type = 'modifier';\n    _this.defaultLocale = {\n      strings: {\n        compressingImages: 'Compressing images...'\n      }\n    };\n    var defaultOptions = {\n      quality: 0.6\n    };\n    _this.opts = _extends({}, defaultOptions, opts); // we use those internally in `this.compress`, so they\n    // should not be overriden\n\n    delete _this.opts.success;\n    delete _this.opts.error;\n\n    _this.i18nInit();\n\n    _this.prepareUpload = _this.prepareUpload.bind(_assertThisInitialized(_this));\n    _this.compress = _this.compress.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  var _proto = UppyImageCompressor.prototype;\n\n  _proto.setOptions = function setOptions(newOpts) {\n    _Plugin.prototype.setOptions.call(this, newOpts);\n\n    this.i18nInit();\n  };\n\n  _proto.i18nInit = function i18nInit() {\n    this.translator = new Translator([this.defaultLocale, this.uppy.locale, this.opts.locale]);\n    this.i18n = this.translator.translate.bind(this.translator);\n    this.setPluginState(); // so that UI re-renders and we see the updated locale\n  };\n\n  _proto.compress = function compress(blob) {\n    var _this2 = this;\n\n    return new Promise(function (resolve, reject) {\n      new Compressor(blob, _extends({}, _this2.opts, {\n        success: function success(result) {\n          return resolve(result);\n        },\n        error: function error(err) {\n          return reject(err);\n        }\n      }));\n    });\n  };\n\n  _proto.prepareUpload = function prepareUpload(fileIDs) {\n    var _this3 = this;\n\n    var promises = fileIDs.map(function (fileID) {\n      var file = _this3.uppy.getFile(fileID);\n\n      _this3.uppy.emit('preprocess-progress', file, {\n        mode: 'indeterminate',\n        message: _this3.i18n('compressingImages')\n      });\n\n      if (file.type.split('/')[0] !== 'image') {\n        return;\n      }\n\n      return _this3.compress(file.data).then(function (compressedBlob) {\n        _this3.uppy.log(\"[Image Compressor] Image \" + file.id + \" size before/after compression: \" + file.data.size + \" / \" + compressedBlob.size);\n\n        _this3.uppy.setFileState(fileID, {\n          data: compressedBlob\n        });\n      })[\"catch\"](function (err) {\n        _this3.uppy.log(\"[Image Compressor] Failed to compress \" + file.id + \":\", 'warning');\n\n        _this3.uppy.log(err, 'warning');\n      });\n    });\n\n    var emitPreprocessCompleteForAll = function emitPreprocessCompleteForAll() {\n      fileIDs.forEach(function (fileID) {\n        var file = _this3.uppy.getFile(fileID);\n\n        _this3.uppy.emit('preprocess-complete', file);\n      });\n    }; // Why emit `preprocess-complete` for all files at once, instead of\n    // above when each is processed?\n    // Because it leads to StatusBar showing a weird “upload 6 files” button,\n    // while waiting for all the files to complete pre-processing.\n\n\n    return Promise.all(promises).then(emitPreprocessCompleteForAll);\n  };\n\n  _proto.install = function install() {\n    this.uppy.addPreProcessor(this.prepareUpload);\n  };\n\n  _proto.uninstall = function uninstall() {\n    this.uppy.removePreProcessor(this.prepareUpload);\n  };\n\n  return UppyImageCompressor;\n}(Plugin);\n\nmodule.exports = UppyImageCompressor;\n"],"sourceRoot":""}